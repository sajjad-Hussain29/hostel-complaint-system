@using System
@model IEnumerable<Complaint_Hostel_system.Models.Complaint>

@{
    ViewBag.Title = "My Complaints";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="complaints-wrapper">
    <h2 class="text-center mb-4"> My Complaints</h2>
</div>

<table class="table table-bordered table-striped" style="width:100%;">
    <thead class="table-dark">
        <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Date</th>
            <th>Status</th>
            <th style="width: 180px;">Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var c in Model)
        {
            <tr>
                <td>@c.Title</td>
                <td>@c.Description</td>
                <td>@c.CreatedAt.ToString("dd-MM-yyyy")</td>
                <td>
                    @if (c.Status == "Pending")
                    {
                        <span class="badge bg-warning text-dark">@c.Status</span>
                    }
                    else if (c.Status == "Resolved")
                    {
                        <span class="badge bg-success">@c.Status</span>
                    }
                    else
                    {
                        <span class="badge bg-secondary">@c.Status</span>
                    }
                </td>
                <td>
                    <div class="btn-group" role="group">
                        <a href="@Url.Action("EditComplaint", "Complaint", new { id = c.ComplaintId })"
                           class="btn btn-warning btn-sm">Edit</a>

                        @using (Html.BeginForm("DeleteComplaint", "Complaint", new { complaintId = c.ComplaintId }, FormMethod.Post,
                            new { onsubmit = "return confirm('Are you sure you want to delete this complaint?')" }))
                        {
                            <input type="submit" value="Delete" class="btn btn-danger btn-sm" />
                        }
                    </div>
                </td>
            </tr>
        }
    </tbody>
</table>

<p style="margin-top:20px;">
    <a href="/Complaint/Create" class="btn btn-primary">File a new complaint</a>
</p>



@*@using System

    @model IEnumerable<Complaint_Hostel_system.Models.Complaint>
    @{
        ViewBag.Title = "My Complaints";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }

    <h2>My Complaints</h2>

    <table class="table table-bordered table-striped" style="width:100%;">
        <thead class="table-dark">
        <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Date</th>
            <th>Status</th>
            <th style="width:150px;">Actions</th>
        </tr>
            </thead>
        <tbody>
        @foreach (var c in Model)
        {
            <tr>
                <td>@c.Title</td>
                <td>@c.Description</td>
                <td>@c.CreatedAt.ToString("dd-MM-yyyy")</td>
                <td>@c.Status</td>
                <td>
                    <div class="btn-group">
                        @Html.ActionLink("Edit", "EditComplaint", "Complaint", new { id = c.ComplaintId },
                       new { @class = "btn btn-warning btn-sm", style = "margin-right:5px;" })

                        @using (Html.BeginForm("DeleteComplaint", "Complaint", new { complaintId = c.ComplaintId }, FormMethod.Post,
                        new { onsubmit = "return confirm('Are you sure you want to delete this complaint?')" }))
                    {
                        <input type="submit" value="Delete" class="btn btn-danger btn-sm" />
                    }
                    </div>
                </td>
            </tr>
        }
        </tbody>
    </table>

    <p style="margin-top:20px;">
        <a href="/Complaint/Create" class="btn btn-primary"> File a new complaint </a>
    </p>*@


